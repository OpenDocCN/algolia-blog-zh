<html>
<head>
<title>Announcing the new JavaScript API Client v4 - Algolia Blog | Algolia Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">宣布新的JavaScript API客户端v4 - Algolia博客</h1>
<blockquote>原文：<a href="https://www.algolia.com/blog/engineering/announcing-the-new-javascript-api-client-v4/#0001-01-01">https://www.algolia.com/blog/engineering/announcing-the-new-javascript-api-client-v4/#0001-01-01</a></blockquote><div><div class="css-t54cg4"><p class="translated">二月初，我们发布了Algolia API客户端JavaScript v4，这是我们有史以来最强大的JavaScript客户端。它更快、更小、更灵活，并且完全支持我们的 <a href="https://blog.algolia.com/release-api-client-specifications-common-test-suite/"> <b>通用API客户端规范</b> </a> <span>。值得注意的是，它包括以前不可用的方法，如零停机时间重新索引、跨帐户操作和许多其他复杂的操作。</span></p>
<p class="translated"><span>好消息是它只涉及到对API</span><span/><span>的最小改动，所以更新应该用不了</span> <b>十分钟</b> <span> : </span> <a href="https://www.algolia.com/doc/api-client/getting-started/upgrade-guides/javascript/#upgrading-from-3351-to-4x"> <b>升级指南</b> </a> <span>。</span></p>
<p class="translated">在本文中，我们将重点介绍这个全新版本的一些主要改进。</p>
<h2 class="translated"><a id="reduced-file-size" class="anchor" href="#reduced-file-size" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a> <span>缩小了文件大小</span></h2>
<p class="translated">我们的新客户带来了许多新功能；然而， <span>尽管增加了这些内容，但实际上</span> <b>比【v3】小了</b> <span/></p>
<ul>
<li class="translated"><span>精简版是v4上压缩的</span><b>4.27 kb</b><span>g，比v3上的</span> 13.21 kb <span>有所下降。</span></li>
<li class="translated"><span>默认版本是v4上压缩的</span><b>7.44 kb</b><span>g，低于v3上的</span> 19.35 kb <span>。</span></li>
</ul>
<p class="translated"><span>这相当于与前一版本相比，</span> <b>总共减少了64%的尺寸</b> <span>。随着这种减少，</span> <b>您的页面加载更快</b> <span>。</span></p>
<h2 class="translated"><a id="zero-dependencies" class="anchor" href="#zero-dependencies" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a> <span>零依赖</span></h2>
<p class="translated"><span>此外，我们还将</span> <b>依赖项的数量从</b> <b> 15 </b> <b>减少到</b> <b> 0 </b> <span>。对，没错——</span><b>0依赖</b> <span>。因此，我们不再冒险接收可能破坏客户端的第三方更新。</span></p>
<h2 class="translated"><a id="taking-dx-one-step-further" class="anchor" href="#taking-dx-one-step-further" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a> <span>更进一步DX</span></h2>
<p class="translated"><span>为了提供最佳的开发者体验，我们添加了一系列新的助手，它们不仅仅是API端点的简单映射。用户现在能够零停机地“替换所有对象”，或在应用程序之间“复制索引”，以及许多其他这样的多任务操作！下面是一些例子:</span></p>
<h2 class="translated">【T9<svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/></svg><img loading="lazy" class="alignnone size-full wp-image-10230" src="../Images/f78f0f3eee0da13457f09cb1589ad719.png" alt="" srcset="https://blog-api.algolia.com/wp-content/uploads/2020/03/a-1.png 1600w, https://blog-api.algolia.com/wp-content/uploads/2020/03/a-1-188x178.png 188w, https://blog-api.algolia.com/wp-content/uploads/2020/03/a-1-768x728.png 768w, https://blog-api.algolia.com/wp-content/uploads/2020/03/a-1-422x400.png 422w" sizes="(max-width: 1600px) 100vw, 1600px" data-original-src="https://blog-api.algolia.com/wp-content/uploads/2020/03/a-1.png"/></h2>
<h2 class="translated"><a id="state-of-the-art-javascript" class="anchor" href="#state-of-the-art-javascript" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a> <span>最新JavaScript </span></h2>
<p class="translated"><span>为了优化开发者体验和类型安全，新的客户端是</span> <b>完全写在</b><a href="https://www.typescriptlang.org"><b>TypeScript</b></a><b>中。</b> <span>得益于此，开发者将能够利用</span> <span>开箱即用的可选静态类型和类型推断。</span></p>
<h2 class="translated"><a id="redesigned-architecture" class="anchor" href="#redesigned-architecture" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a> <span>重新设计的架构</span></h2>
<p class="translated"><span>就像v3一样，我们</span> <span>出货有两个版本:</span><i><span>lite</span></i><span>和</span> <i> <span>默认</span></i><span>——这些都是</span> <b>预定义版本</b> <span>，帮助开发者快速入门使用传统的:</span><i><span>algoliasearch(appId，apiKey)</span></i><span>。</span></p>
<p class="translated"><span>现在，得益于全新的架构，你可以</span> <b>构建自己版本的客户端</b><span/><b>适应你的需求</b> <span>。这里有一个例子:</span></p>
<p class="translated"><img loading="lazy" class="alignnone size-full wp-image-10229" src="../Images/6654bc0aacc51b9b94eb2471c7d61925.png" alt="" srcset="https://blog-api.algolia.com/wp-content/uploads/2020/03/b.png 3236w, https://blog-api.algolia.com/wp-content/uploads/2020/03/b-135x178.png 135w, https://blog-api.algolia.com/wp-content/uploads/2020/03/b-768x1014.png 768w, https://blog-api.algolia.com/wp-content/uploads/2020/03/b-303x400.png 303w" sizes="(max-width: 3236px) 100vw, 3236px" data-original-src="https://blog-api.algolia.com/wp-content/uploads/2020/03/b.png"/></p>
<p class="translated"><span>使用这种方法，开发人员可以注入他们自己的请求程序和日志程序，以及他们自己的缓存实现。好消息是，即使你注入你的具体实现，一切仍然在我们的</span> <a href="https://www.algolia.com/doc/api-client/methods/advanced/#retry-logic"> <b>重试策略</b> </a> <span>下运行。</span></p>
<p class="translated">我们相信这种模块化有助于开发人员满足更高级用例的需求。</p>
<h2 class="translated"><a id="and-more" class="anchor" href="#and-more" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a> <span>等等！</span></h2>
<p class="translated"><span>Algolia API客户端JavaScript </span> <span>是100%开源的，所以可以随意挖掘</span> <a href="https://github.com/algolia/algoliasearch-client-javascript"> <b>源代码</b> </a> <span>来看看它到底是如何工作的。挖吧！访问我们的</span> <a href="https://www.algolia.com/doc/api-client/getting-started/install/javascript/?language=javascript"> <b>文档</b> </a> <span>。</span></p>
<p class="translated"><span>看到需要改进的地方？只需在GitHub上向我们发送请求。谢谢！我们希望你喜欢这个新版本！🎉</span></p>
</div></div>    
</body>
</html>