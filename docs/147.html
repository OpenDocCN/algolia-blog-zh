<html>
<head>
<title>Feature Spotlight: Trends Models in Recommend - Algolia Blog | Algolia Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">特色聚焦:推荐中的趋势模型- Algolia博客</h1>
<blockquote>原文：<a href="https://www.algolia.com/blog/engineering/feature-spotlight-trends-models-in-recommend/#0001-01-01">https://www.algolia.com/blog/engineering/feature-spotlight-trends-models-in-recommend/#0001-01-01</a></blockquote><div><div class="css-t54cg4"><p class="translated">推荐依赖于数据——你知道的越多，你的推荐就越好。<a href="https://www.algolia.com/products/recommendations/"> Algolia的推荐</a>产品使用机器学习来建议您的客户感兴趣的产品或内容，从而让您的数据发挥作用。今天，我们把焦点放在推荐的新趋势模型上。您将了解它们如何工作，以及它们如何扩展您使用推荐的方式。</p>
<p class="translated">在推出时，推荐提供了两个初始的机器学习模型:<em>相关产品</em>和<em>经常一起购买</em>。两者都是协同过滤模型，也就是说，当用户与你的网站互动时，你可以用他们点击和购买的产品来训练他们(事件数据)。这些模型非常适合以产品为中心的推荐。给定目录中的特定产品，您可以使用模型来推荐您的客户发现类似或购买的其他产品。您可以将这些建议放在产品详情页面和结账流程上，以帮助您的客户发现他们可能感兴趣的其他产品。除了我们将在本文中讨论的内容之外，这些初始模型刚刚更新，您现在可以在没有事件数据的情况下<em>立即开始使用它们—<a href="https://www.algolia.com/blog/product/ai-powered-recommendations-product-launch/">在此了解更多信息</a>。</em></p>
<p class="translated"><em>趋势</em>模型同样由协同过滤驱动，但不同之处在于它们不局限于基于单一产品的推荐。相反，他们会在整个目录中寻找产品趋势，或者在目录的某个特定方面/类别中寻找产品趋势。</p>
<h2 class="translated"><a id="diving-into-trends" class="anchor" href="#diving-into-trends" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a>跳水成趋势</h2>
<p class="translated">要使用推荐的型号，您需要将您的产品存储在Algolia索引中。然后，您可以跟踪索引中项或方面值的趋势。请记住，方面是一种属性，就像“颜色”一样，是您在索引中为过滤而配置的。索引中该属性的可能值称为方面值，如“红色”或“紫色”。</p>
<p class="translated">根据趋势的类型，您将<a href="https://www.algolia.com/doc/guides/algolia-recommend/overview/#trending-items-and-trending-facet-values">培训两个新模型中的一个</a>:</p>
<ul>
<li class="translated">趋势项目–特定方面值或整个目录中最受欢迎的项目。</li>
<li class="translated">趋势面值–特定面的最流行值(例如，“毛衣”作为“类别”的值)。</li>
</ul>
<p class="translated">这两个模型都是通过协同过滤来训练的，这意味着它们从事件数据中学习趋势——特别是从您的用户那里捕获的转换事件。转换事件可以是购买一件商品，将其添加到购物车，或者将其标记为收藏。</p>
<p class="translated"><strong>趋势项目</strong>模型查看过去几天每个项目的转换事件总数，以及转换事件数量随时间的<i>变化</i>，以了解索引中每个记录的“趋势”。然后，它为目录中的每个项目分配一个分数，可以是全局的，也可以是特定方面值内的。</p>
<p class="translated">对于<strong>趋势分面值</strong>，该模型对分面属性做同样的事情——对每个分面值的总转换数和几天内的转换变化进行评分。每个模型最多可以收集三个方面的趋势信息。</p>
<p class="translated">为了使用趋势，您将需要在至少三天内使用至少500个转换事件来训练模型。显然，您发送的信息越多，模型提供的推荐就越好。</p>
<h2 class="translated"><a id="where-to-use-trends" class="anchor" href="#where-to-use-trends" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a>哪里用趋势</h2>
<p class="translated">趋势商品是对其他以产品为中心的模型的补充，它允许你在你的顾客选择一个产品之前，在你的主页上推荐一个特定类别中的流行商品或畅销商品。</p>
<p class="translated">趋势面非常适合在你的主页上添加当前相关的流行类别或产品属性——无论是春季的园艺用品还是秋季的大衣和帽子。</p>
<p class="translated">这两个模型一旦被训练，就可以提供多达30个建议，或者是全局的，或者是特定方面的。</p>
<h2 class="translated"><a id="training-your-trends-model" class="anchor" href="#training-your-trends-model" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a>训练你的趋势模型</h2>
<p class="translated">在使用任何推荐的型号之前，你需要<a href="https://www.algolia.com/users/sign_up?utm_source=blog&amp;utm_medium=main-blog&amp;utm_campaign=devrel&amp;utm_id=spotlight-trends">注册一个Algolia账户</a>并将你的产品目录载入索引。你可以使用一个现有的搜索索引或者建立一个推荐的搜索索引。</p>
<p class="translated">一旦你的索引被产品记录填充，你需要<a href="https://www.algolia.com/doc/guides/sending-events/implementing/">开始发送用户事件信息给Algolia </a>。您可以使用内置于Algolia即时搜索前端库、Algolia Insights API的事件集成，或者与主要电子商务平台和分析后端的支持集成来收集这些数据。您甚至可以将您的活动上传为具有适当记录格式的CSV文件。</p>
<p class="translated">请记住，因为趋势模型关注的是随时间的变化，所以您需要发送跨越多天的转换事件。</p>
<p class="translated">最低活动要求是:</p>
<ul>
<li class="translated">过去30天内500次转换</li>
<li class="translated">至少3天内的事件(因此不是一天500次转换)</li>
<li class="translated">索引中至少10个项目的事件</li>
</ul>
<p class="translated">您可以在<a href="https://www.algolia.com/users/sign_in">仪表板</a>的<i>数据源</i>部分跟踪整个应用程序中的事件总数。本节还为您提供了对事件进行故障排除的调试工具。</p>
<p class="translated">要开始训练您的模型，请从推荐仪表板中选择<i>趋势</i>模型。选择您的产品指数，推荐会让您知道您是否有足够的所需转换事件来开始培训。如果您看到有关检索事件的错误，您可能需要禁用广告拦截软件。</p>
<p class="translated">接下来，可以选择训练模型时要考虑的任何方面。例如，您可以为面<code>category_page_id</code>上的<i>趋势面值</i>训练模型。您现在可以点击<i>训练模型</i>开始训练过程。培训通常需要几个小时才能完成。</p>
<h2 class="translated"><a id="add-trends-to-your-frontend-using-the-recommend-ui" class="anchor" href="#add-trends-to-your-frontend-using-the-recommend-ui" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a>使用推荐界面将趋势添加到您的前端</h2>
<p class="translated">一旦模型定型，就可以开始向应用程序中添加趋势建议了。最简单的方法是使用<a href="https://www.algolia.com/doc/ui-libraries/recommend/introduction/what-is-recommend/">推荐普通JavaScript或React的前端UI库</a>。</p>
<p class="translated">假设您想使用新训练的<i>趋势方面值</i>模型，将趋势类别添加到Algolia <a href="https://www.algolia.com/doc/guides/building-search-ui/ecommerce-ui-template/overview/react/">电子商务UI模板</a>中。首先，您需要使用npm(或yarn)将<code>recommend</code>和<code>recommend-react</code>库添加到项目中:</p>
<pre class="lang:bash decode:true">npm install --save @algolia/recommend-react @algolia/recommend</pre>
<p class="translated">一旦安装了库，您将需要编写一个新的<code>FacetList</code>组件来检索和显示来自您的训练模型的方面推荐。您的组件需要使用包含您的训练模型的应用程序中的应用程序ID和API密钥来初始化推荐客户端。</p>
<pre class="lang:js decode:true">const recommendClient = recommend(ALGOLIA_APP_ID, ALGOLIA_SEARCH_ONLY_API_KEY)</pre>
<p class="translated">接下来，从推荐React库中添加<code>TrendingFacets</code>小部件。由于您在电子商务UI中工作，您将使用抽象的<code>Container</code>组件作为包装器，并以与库中其他组件相同的方式处理标题。这意味着您想要通过包含<code>headerComponent={() =&gt; null}</code>来取消默认标题。通过使用<code>maxRecommendations={3}</code>将30个推荐列表减少到前3个，你可以避免让你的访问者不知所措。</p>
<p class="translated">这是完整的<code>FacetList</code>组件:</p>
<pre class="lang:js decode:true">import algoliasearch from 'algoliasearch';&#13;
import recommend from '@algolia/recommend'&#13;
import { TrendingFacets } from '@algolia/recommend-react'&#13;
import classNames from 'classnames'&#13;
import { Container } from '@/components/container/container'&#13;
&#13;
const recommendClient = recommend(ALGOLIA_APP_ID, ALGOLIA_SEARCH_ONLY_API_KEY)&#13;
&#13;
export type FacetListProps = {&#13;
  title?: string&#13;
  indexName: string&#13;
  facetName: string&#13;
  className?: string&#13;
  [index: string]: any&#13;
}&#13;
&#13;
export function FacetList({&#13;
  indexName,&#13;
  facetName,&#13;
  title,&#13;
  className,&#13;
}: FacetListProps) {&#13;
  return (&#13;
    &lt;section className={classNames('py-4 laptop:py-16', className)}&gt;&#13;
      &lt;Container&gt;&#13;
        {title &amp;&amp; (&#13;
          &lt;h2 className="text-sm font-semibold tracking-[2px] uppercase mb-3 laptop:mb-6 laptop:ml-3 laptop:heading-3"&gt;&#13;
            {title}&#13;
          &lt;/h2&gt;&#13;
        )}&#13;
        &lt;TrendingFacets&#13;
          recommendClient={recommendClient}&#13;
          indexName={indexName}&#13;
          maxRecommendations={3}&#13;
          itemComponent={({ item }) =&gt; &lt;a href={item.facetValue}&gt;{item.facetValue}&lt;/a&gt;}&#13;
          headerComponent={() =&gt; null}&#13;
          facetName={facetName}&#13;
        /&gt;&#13;
      &lt;/Container&gt;&#13;
    &lt;/section&gt;&#13;
  )&#13;
}</pre>
<p class="translated">最后，将完成的组件添加到您的<code>index.tsx</code>页面上的<code>Banner</code>小部件之后:</p>
<pre class="lang:js decode:true">      &lt;FacetList&#13;
        title="Trending Categories"&#13;
        indexName="prod_ECOM"&#13;
        facetName="category_page_id"&#13;
      /&gt;</pre>
<p class="translated">重新加载后，您现在应该会看到热门趋势类别，就在主页的横幅下方:</p>
<p class="translated"><img loading="lazy" class="alignnone wp-image-15252 size-large" src="../Images/c1a3dd9cd3351ae3854604bc6f65bf75.png" alt="Ecommerce homepage with recommendations" srcset="https://blog-api.algolia.com/wp-content/uploads/2022/06/Screen-Shot-2022-06-06-at-10.48.07-PM-709x400.png 709w, https://blog-api.algolia.com/wp-content/uploads/2022/06/Screen-Shot-2022-06-06-at-10.48.07-PM-315x178.png 315w, https://blog-api.algolia.com/wp-content/uploads/2022/06/Screen-Shot-2022-06-06-at-10.48.07-PM-768x433.png 768w, https://blog-api.algolia.com/wp-content/uploads/2022/06/Screen-Shot-2022-06-06-at-10.48.07-PM.png 950w" sizes="(max-width: 640px) 100vw, 640px" data-original-src="https://blog-api.algolia.com/wp-content/uploads/2022/06/Screen-Shot-2022-06-06-at-10.48.07-PM-709x400.png"/></p>
<h2 class="translated"><a id="conclusion" class="anchor" href="#conclusion" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a>结论</h2>
<p class="translated">趋势模型是对推荐中现有的(和最新更新的)产品模型的很好补充。您可以将这两种类型的模型结合起来，帮助您的客户在您网站的整个旅程中发现新的商品——主页上的facet value trends将他们引向类别页面上的趋势商品，产品详情页面上的相关产品，最后是结账时经常一起购买的商品。在每个阶段，顾客都被引导到他们通过传统搜索可能错过的商品。</p>
<p class="translated">您现在可以从<a href="https://www.algolia.com/users/sign_up?utm_source=blog&amp;amp;utm_medium=main-blog&amp;amp;utm_campaign=devrel&amp;amp;utm_id=spotlight-trends"> Algolia推荐仪表板</a>开始使用趋势项目和趋势方面值。或者，您可以阅读更多关于推荐必须提供的<a href="https://www.algolia.com/blog/engineering/recommendations-for-developers-the-complete-how-to-what-to-and-where-to-guide/">其他特性</a>。</p>
</div></div>    
</body>
</html>