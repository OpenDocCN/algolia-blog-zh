<html>
<head>
<title>Scout Extended: The Full Power of Algolia in Laravel - Algolia Blog | Algolia Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">scout Extended:Algolia在Laravel的全部力量- Algolia博客</h1>
<blockquote>原文：<a href="https://www.algolia.com/blog/engineering/scout-extended-the-full-power-of-algolia-in-laravel/#0001-01-01">https://www.algolia.com/blog/engineering/scout-extended-the-full-power-of-algolia-in-laravel/#0001-01-01</a></blockquote><div><div class="css-t54cg4"><p class="translated">我们很高兴地宣布Scout Extended的发布——官方的Algolia Laravel集成。Scout Extended建立在最新发布的<a href="https://laravel.com/docs/scout" target="_blank" rel="noopener noreferrer"> Laravel Scout </a>之上，让您可以利用Scout的所有强大功能，同时利用完整的Algolia搜索体验。</p>
<p class="translated">当Laravel Scout首次发布时，它提供了对Algolia搜索的即时访问。对许多人来说，这意味着简单地获得快速和允许输入错误的现成搜索。然而，Algolia不仅仅是速度和打字错误的容忍度。和速度一样，还有相关性——让最佳匹配记录<em>总是</em>出现在你的结果的顶部。为了实现这一点，您需要设置一些基础。Scout Extended让你可以通过Laravel Artisan命令直接访问这些和其他设置。</p>
<p class="translated">更容易配置Algolia只是我们在Laravel Scout上增加的扩展之一。另一个同样重要的特性是对聚合器的支持:现在你可以集中搜索，为你的整个网站创建一个单一的入口点。其他改进包括完全重建索引，无需用户停机，扩展搜索生成器，获得状态概述，以及许多其他功能。让我们进入一些细节。</p>
<p class="translated">如果你更喜欢观看而不是阅读，<a href="https://www.youtube.com/watch?v=2Jy_4sL9Iug" target="_blank" rel="noopener noreferrer">这是我最近在Scout Extended </a>上做的一个演讲。</p>
<h2 class="translated"><a id="aggregators-%e2%80%94-multiple-models-in-one-index" class="anchor" href="#aggregators-%e2%80%94-multiple-models-in-one-index" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a>聚合器—一个索引中的多个模型</h2>
<p class="translated">聚合器是一种在多个模型中实现站点范围搜索的干净方式。换句话说，它允许您在一个索引中拥有多个模型。</p>
<p class="translated">要创建新的聚合器，使用<code>scout:make-aggregator</code> Artisan命令。该命令将在<code>app/Search</code>目录中创建新的聚合器类:</p>
<blockquote><p class="translated">PHP artisan scout:make-aggregator新闻</p></blockquote>
<p class="translated">在生成您的聚合器之后，您应该填充该类的<code>$models</code>属性，它将用于标识应该被聚合的模型:</p>

<p class="translated">聚合器是一个标准的<code>searchable</code>类，通常，您可以使用<code>search</code>方法或<code>raw</code>方法在聚合器上开始搜索:</p>

<p class="translated">要了解更多关于Scout Extended中聚合器的信息，请查看<a href="https://algolia.com/doc/framework-integration/laravel" target="_blank" rel="noopener noreferrer"> Scout Extended文档</a>。</p>
<h2 class="translated"><a id="zero-downtime-reimports-%e2%80%94-painless-to-deploy" class="anchor" href="#zero-downtime-reimports-%e2%80%94-painless-to-deploy" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a>零停机时间重新导入—轻松部署</h2>
<p class="translated">有了Scout Extended，在生产中导入数据变得轻而易举。要在重新导入数据时保持现有搜索体验可用，请使用<code>scout:reimport</code> Artisan命令:</p>
<blockquote><p class="translated">php工匠侦察兵:重新导入</p></blockquote>
<p class="translated">该Artisan命令将输出以下内容:</p>
<p class="translated"><img loading="lazy" class="aligncenter size-large wp-image-8030" src="../Images/d050fdd2cfc09d9d17d0b325dc8d61b8.png" alt="" srcset="https://blog-api.algolia.com/wp-content/uploads/2019/01/Scout-Extended-Zero-Downtime-720x300.png 720w, https://blog-api.algolia.com/wp-content/uploads/2019/01/Scout-Extended-Zero-Downtime-320x133.png 320w, https://blog-api.algolia.com/wp-content/uploads/2019/01/Scout-Extended-Zero-Downtime-768x320.png 768w, https://blog-api.algolia.com/wp-content/uploads/2019/01/Scout-Extended-Zero-Downtime.png 1600w" sizes="(max-width: 640px) 100vw, 640px" data-original-src="https://blog-api.algolia.com/wp-content/uploads/2019/01/Scout-Extended-Zero-Downtime-720x300.png"/></p>
<p class="translated">为了确保在重建期间对索引执行的搜索不会被中断，Scout Extended在将<em>临时</em>索引移动到<em>生产</em>索引之前，使用<em>临时</em>索引来导入所有记录。我们掩护你。</p>
<h2 class="translated"><a id="configuring-algolia-from-within-laravel" class="anchor" href="#configuring-algolia-from-within-laravel" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a>从Laravel内部配置Algolia</h2>
<p class="translated">您将从<code>scout:optimize</code> Artisan命令开始，根据来自<code>searchable</code>类的信息优化搜索体验:</p>
<blockquote><p class="translated">php artisan scout:优化</p></blockquote>
<p class="translated">这可能就足够了。<code>scout:optimize</code>会尽力生成您的<code>searchable</code>等级索引的设置，但您可能需要在<code>config/scout-articles.php</code>中编辑这些设置。例如，两个最重要的正确配置是可搜索属性和自定义排名:</p>

<p class="translated">一旦您验证了设置文件，您需要做的就是使用<code>scout:sync</code> Artisan命令与Algolia同步设置:</p>
<blockquote><p class="translated">php工匠童军:同步</p></blockquote>
<p class="translated">您也可以使用<a href="https://www.algolia.com/dashboard"> Algolia仪表盘</a>编辑设置。然而，确保你在本地运行<code>scout:sync</code> Artisan命令时应用这些设置。</p>
<h2 class="translated"><a id="an-improved-search-builder" class="anchor" href="#an-improved-search-builder" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a>一个改进的搜索生成器</h2>
<p class="translated">Scout Extended将Laravel Scout的搜索生成器推向了一个新的高度，增加了新的方法并改进了现有的方法。这里有一些例子。</p>

<p class="translated"><code>where</code>方法可以用来比较一个字段的值和另一个值。使用Scout Extended，该方法共享Laravel查询构建器的相同API，允许您通过比较或数字范围过滤结果:</p>

<p class="translated">支持的运算符有:<code>&lt;, &lt;=, =, !=, &gt;=, &gt;</code>。</p>

<p class="translated"><code>whereBetween</code>方法验证一个字段的值在两个值之间:</p>

<p class="translated">你可以用<code>whereIn</code>、<code>with</code>、<code>count</code>和<code>aroundLatLng</code>做同样的事情。前往<a href="https://www.algolia.com/doc/framework-integration/laravel/searching/server-side-search/?language=php#searching">Scout Extended Documentation</a>了解更多这方面的信息。</p>
<h2 class="translated"><a id="status-overviews" class="anchor" href="#status-overviews" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a>状态概述</h2>
<p class="translated">Scout Extended为您的应用程序索引提供了一个漂亮的概览，允许您轻松地监控记录的数量以及其他关键指标。</p>
<p class="translated">使用<code>scout:status</code> Artisan命令获得应用索引的概览:</p>
<blockquote><p class="translated">php工匠童子军:状态</p></blockquote>
<p class="translated">该Artisan命令将输出一个包含以下内容的表格:</p>
<p class="translated"><img loading="lazy" class="aligncenter size-large wp-image-8031" src="../Images/fefb7e3b5376ea41e6ddd2df6b94c335.png" alt="" srcset="https://blog-api.algolia.com/wp-content/uploads/2019/01/Scout-Extended-Status-Overview-720x265.png 720w, https://blog-api.algolia.com/wp-content/uploads/2019/01/Scout-Extended-Status-Overview-320x118.png 320w, https://blog-api.algolia.com/wp-content/uploads/2019/01/Scout-Extended-Status-Overview-768x283.png 768w, https://blog-api.algolia.com/wp-content/uploads/2019/01/Scout-Extended-Status-Overview.png 1600w" sizes="(max-width: 640px) 100vw, 640px" data-original-src="https://blog-api.algolia.com/wp-content/uploads/2019/01/Scout-Extended-Status-Overview-720x265.png"/></p>
<h2 class="translated"><a id="and-more" class="anchor" href="#and-more" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a>还有更多！</h2>

<p class="translated">Scout Extended是100%开源的，所以你可以自由地挖掘<a href="https://github.com/algolia/scout-extended" target="_blank" rel="noopener noreferrer">源代码</a>，看看它到底是如何工作的。挖吧！访问<a href="https://algolia.com/doc/framework-integration/laravel"> Scout扩展文档</a>。</p>
<p class="translated">看到需要改进的地方？只需在GitHub 上给我们发送一个<a href="https://github.com/algolia/scout-extended" target="_blank" rel="noopener noreferrer"> pull请求。</a></p>
<p class="translated">谢谢，我们希望你喜欢这个新版本！</p>
</div></div>    
</body>
</html>