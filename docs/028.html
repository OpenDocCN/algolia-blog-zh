<html>
<head>
<title>How neural hashing can unleash the full potential of AI retrieval - Algolia Blog | Algolia Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">神经哈希如何释放人工智能检索的全部潜力</h1>
<blockquote>原文：<a href="https://www.algolia.com/blog/ai/neural-hashing-ai-search-retrieval/#0001-01-01">https://www.algolia.com/blog/ai/neural-hashing-ai-search-retrieval/#0001-01-01</a></blockquote><div><div class="css-t54cg4"><p class="translated"><span>搜索可以同时感受到简单和复杂。在谷歌上搜索很简单，搜索结果也非常相关(尽管这一点在最近几年谷歌推出大量赞助搜索结果的情况下仍有争议)。虽然不是搜索，但ChatGPT让这种体验变得更加神奇。但是，任何实现过搜索的人都知道，信息检索是一个高度复杂的话题。</span></p>
<p class="translated"><span>为了简化，从搜索查询到结果的生命周期，s </span> <span> earch可以分为三个不同的过程:查询理解、检索和排名。</span></p>
<ol>
<li class="translated"><b>查询理解</b> <span>:自然语言处理(NLP)技术为搜索引擎分析准备和构造查询；</span></li>
<li aria-level="1" class="translated"><b>检索</b></li>
<li aria-level="1" class="translated"><b>排名</b> <span>:最后还有一个重新排名的过程，把最好的结果推到最前面(基于点击、转化等)。)并应用客户的规则、个性化等等。</span></li>
</ol>
<p class="translated"><img loading="lazy" class="alignnone size-large wp-image-18139" src="../Images/af9a8e96f6f29ac0b8c51aa03eb6453b.png" alt="search pyramid" srcset="https://blog-api.algolia.com/wp-content/uploads/2023/02/Screenshot-2023-02-14-at-8.38.35-PM-720x384.png 720w, https://blog-api.algolia.com/wp-content/uploads/2023/02/Screenshot-2023-02-14-at-8.38.35-PM-320x171.png 320w, https://blog-api.algolia.com/wp-content/uploads/2023/02/Screenshot-2023-02-14-at-8.38.35-PM-768x410.png 768w, https://blog-api.algolia.com/wp-content/uploads/2023/02/Screenshot-2023-02-14-at-8.38.35-PM-1536x819.png 1536w, https://blog-api.algolia.com/wp-content/uploads/2023/02/Screenshot-2023-02-14-at-8.38.35-PM.png 1792w" sizes="(max-width: 640px) 100vw, 640px" data-original-src="https://blog-api.algolia.com/wp-content/uploads/2023/02/Screenshot-2023-02-14-at-8.38.35-PM-720x384.png"/></p>
<p class="translated">机器学习人工智能已经应用于查询处理和排序有一段时间了，它极大地改善了这两者。缺失的部分是检索，而检索对于提高结果的整体质量更为重要。</p>
<p class="translated"><span>我们可以用</span><i><span/></i><span/><i><span>召回</span> </i> <span>来衡量检索质量。Precision是检索到的</span><i><span/></i><span>相关文档的百分比，recall是检索到的</span><i><span/></i><span>相关文档的百分比。这两个指标可以帮助我们确定搜索结果是否好。</span></p>
<p class="translated"><span>举例来说，假设是时候升级你的厨具了，所以你在你最喜欢的卖家网站上搜索“煎锅”。在这些结果中，有些项目非常相关。但是，有些不是——比如带平底锅的炊具套装(截图如下)。这就是精准。然而，网站上还有许多其他相关产品是</span> <i> <span>而不是</span> </i> <span>包含在结果中。我们称之为召回。</span></p>
<p class="translated"><img loading="lazy" class="alignnone wp-image-18117 size-full" src="../Images/64fc871952f0a94479562d1934ee135f.png" alt="precision vs recall" srcset="https://blog-api.algolia.com/wp-content/uploads/2023/02/frypan.jpg 1999w, https://blog-api.algolia.com/wp-content/uploads/2023/02/frypan-291x178.jpg 291w, https://blog-api.algolia.com/wp-content/uploads/2023/02/frypan-654x400.jpg 654w, https://blog-api.algolia.com/wp-content/uploads/2023/02/frypan-768x470.jpg 768w, https://blog-api.algolia.com/wp-content/uploads/2023/02/frypan-1536x940.jpg 1536w" sizes="(max-width: 1999px) 100vw, 1999px" data-original-src="https://blog-api.algolia.com/wp-content/uploads/2023/02/frypan.jpg"/></p>
<p class="translated">现在，假设您决定改进搜索查询。您可能会搜索“不粘锅”，这一次(见下文)(1)此查询会有不同数量的结果，因为我们引入了略有不同的关键字，以及(2)会有更多您期望的结果(煎锅，而不是炊具套装)。</p>
<p class="translated"><img loading="lazy" class="alignnone wp-image-18118 size-full" src="../Images/14473940f2b4d0aa20c4ff8782d07587.png" alt="recall vs precision" srcset="https://blog-api.algolia.com/wp-content/uploads/2023/02/non-stick-frypan.jpg 1999w, https://blog-api.algolia.com/wp-content/uploads/2023/02/non-stick-frypan-285x178.jpg 285w, https://blog-api.algolia.com/wp-content/uploads/2023/02/non-stick-frypan-640x400.jpg 640w, https://blog-api.algolia.com/wp-content/uploads/2023/02/non-stick-frypan-768x480.jpg 768w, https://blog-api.algolia.com/wp-content/uploads/2023/02/non-stick-frypan-1536x960.jpg 1536w" sizes="(max-width: 1999px) 100vw, 1999px" data-original-src="https://blog-api.algolia.com/wp-content/uploads/2023/02/non-stick-frypan.jpg"/></p>
<p class="translated"><span>其实精准和召回之间可以有一个阴阳；提高精确度(准确性)可能会影响召回率，而提高召回率(完整性)可能会损害精确度。圣杯正在改善这两者，这正是人工智能检索可以做到的。</span></p>
<p class="translated"><span>检索是人工智能搜索难题的最后一块，也是最难的一块，原因如下:</span></p>
<ul>
<li aria-level="1" class="translated"><span>管理人工智能检索规模和性能的成本过高。存储、CPU和算法都需要专门化。</span></li>
<li aria-level="1" class="translated"><span>人工智能检索模型是“脆弱的”——搜索索引随着新的或改变的内容而更新，模型将需要更新。</span></li>
<li aria-level="1" class="translated">在精确匹配和广义概念匹配之间有一个折衷。</li>
</ul>
<p class="translated">在这篇文章中，我将解释我们如何着手解决人工智能检索的最后一个挑战。在以后的文章中，我会更多地谈论搜索金字塔的其他部分。</p>
<h2 class="translated"><a id="ai-information-retrieval%c2%a0" class="anchor" href="#ai-information-retrieval%c2%a0" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a> <span>人工智能信息检索</span></h2>
<p class="translated"><span>搜索检索需要技术来确定任何特定查询的相关性。多年来，它是由关键词搜索引擎驱动的。这种情况正在改变。随着向量搜索的引入，它超越了关键字搜索，概念可以被理解。</span></p>
<p class="translated"><a href="https://www.algolia.com/blog/ai/what-is-vector-search/"> <span>矢量搜索</span> </a> <span>是一种用于AI搜索的机器学习技术。向量是用数学方法表示单词的一种方式。向量在多个维度(也称为n维空间)中被绘制和聚集。向量搜索通过多个对象的向量表示来比较它们与搜索查询或主题项目的相似性。为了找到相似的匹配，使用用于将对象(即数据或内容)转换成向量的相同模型，将查询(或主题)转换成向量。彼此相似的向量从数据库返回，找到最接近的匹配，提供准确的结果，同时消除传统搜索技术可能返回的不相关的结果。</span></p>
<figure id="attachment_18119" aria-describedby="caption-attachment-18119" class="wp-caption alignnone"><img loading="lazy" class="wp-image-18119 size-full" src="../Images/2d675057064737efb74674803b0d805e.png" alt="n-dimensional vector space " srcset="https://blog-api.algolia.com/wp-content/uploads/2023/02/vector-space.jpg 1482w, https://blog-api.algolia.com/wp-content/uploads/2023/02/vector-space-222x178.jpg 222w, https://blog-api.algolia.com/wp-content/uploads/2023/02/vector-space-500x400.jpg 500w, https://blog-api.algolia.com/wp-content/uploads/2023/02/vector-space-768x615.jpg 768w" sizes="(max-width: 1482px) 100vw, 1482px" data-original-src="https://blog-api.algolia.com/wp-content/uploads/2023/02/vector-space.jpg"/><figcaption id="caption-attachment-18119" class="wp-caption-text">An example of what vectors in an n-dimensional space might look like for the term “coffee”, visualized via <a href="https://projector.tensorflow.org/">Tensorflow image projector</a></figcaption></figure>
<p class="translated"><span>诸如</span> <a href="https://en.wikipedia.org/wiki/Nearest_neighbor_search"> <span> HNSW(分层可导航小世界)</span> </a> <span>、IVF(倒排文件)或PQ(乘积量化，一种减少向量维数的技术)的技术是一些最流行的近似最近邻(ANN)方法，用于找到向量之间的相似性。每种技术都侧重于改善特定的性能属性，例如使用PQ减少内存，或者使用HNSW和IVF快速而准确地缩短搜索时间。常见的做法是混合几个组件来产生一个“复合”指数，以实现给定用例的最佳性能。</span></p>
<p class="translated">可以有成千上万个维度。每个向量之间的接近度和角度有助于搜索引擎确定术语和含义之间的相似性。输入“加牛奶的意式浓缩咖啡”，矢量搜索引擎会寻找相似之处，返回带有蒸汽棒的意式浓缩咖啡机。然而，键入一个词，如“德隆基”(一个浓缩咖啡机品牌)，一个 <a href="https://www.algolia.com/blog/ai/what-is-vector-search/"> <span>矢量搜索引擎</span> </a> <span>就有可能返回其他品牌和不同的机器——Nespresso、Keurig、凯膳怡等。那是因为vectors只理解德隆基的</span> <i> <span>概念</span> </i> <span>。</span></p>
<p class="translated"><img loading="lazy" class="alignnone wp-image-18120 size-full" src="../Images/a9da2cd1b9692d900025b071b0c50aef.png" alt="espresso with milk thingy" srcset="https://blog-api.algolia.com/wp-content/uploads/2023/02/milk-thingy.jpg 1999w, https://blog-api.algolia.com/wp-content/uploads/2023/02/milk-thingy-274x178.jpg 274w, https://blog-api.algolia.com/wp-content/uploads/2023/02/milk-thingy-616x400.jpg 616w, https://blog-api.algolia.com/wp-content/uploads/2023/02/milk-thingy-768x498.jpg 768w, https://blog-api.algolia.com/wp-content/uploads/2023/02/milk-thingy-1536x997.jpg 1536w" sizes="(max-width: 1999px) 100vw, 1999px" data-original-src="https://blog-api.algolia.com/wp-content/uploads/2023/02/milk-thingy.jpg"/></p>
<p class="translated">与较新的矢量引擎不同，传统的关键词搜索引擎快速而精确。因此，搜索“德隆基Magnifica”就能给出确切的答案。然而，当查询与您的搜索索引中的内容不匹配时，关键字搜索引擎可能会陷入困境。为了解决这个问题，公司可以添加规则、同义词、关键字标签或其他解决方法，但不可能涵盖所有用例。</p>
<p class="translated"><span>例如，您可以编写一条规则，包含关键字</span> <i> <span>【咖啡或浓缩咖啡】【机器】【牛奶】</span> </i> <span>的查询与</span> <i> <span>【带蒸汽棒的浓缩咖啡机】的意思相同</span> </i> <span>问题是你不可能为每一个可能的长尾查询覆盖每一个边缘案例。再举一个例子，搜索“java”这个词。</span><i><span>Java</span></i><span>与</span><i><span>coffee</span></i><span>和</span><i><span>espresso</span></i><span>同义使用，但除非搜索引擎中有同义词或规则，否则查询会失败。</span></p>
<p class="translated"><span>设计和构建一个有效的可伸缩向量索引是一项复杂而昂贵的任务。同样，构建一个有效的适用于长尾查询的关键词搜索引擎也同样令人望而生畏。分开来说，向量和关键词搜索技术都相当不错。然而，在一起，他们是了不起的。</span></p>
<p class="translated">这被称为混合搜索，它适用于精确匹配、不明确的短查询和长尾查询。</p>
<h2 class="translated"><a id="an-ai-search-performance-breakthrough" class="anchor" href="#an-ai-search-performance-breakthrough" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a> <span>人工智能搜索性能突破</span></h2>
<p class="translated"><span>所以，你只要把一些向量和关键词技术拼凑起来就大功告成了，对吧？混合搜索引擎解决了！</span></p>
<p class="translated">要是有这么容易就好了。正如你可能想象的，有一些挑战。最大的问题是管理矢量搜索的规模和成本。向量基本上是浮点数。计算机与浮点数进行了巨大的斗争。这就是为什么像GPU这样的专用计算机被用于人工智能和矢量操作。您不仅需要专门的数据库来运行vector search，还需要全职的开发资源来持续管理生产。对于人工智能模型，输入模型的数据保持新鲜、相关和优化是至关重要的。对于数据不断更新且速度至关重要的电子商务和企业业务，人工智能搜索的计算成本太高，无法在生产中运行。</p>
<p class="translated"><span>一些公司试图通过运行人工智能查询</span> <i> <span>来解决这个问题，前提是</span> </i> <span>关键字查询失败。这有助于最小化处理成本，但不能为客户提供最佳结果。</span></p>
<p class="translated"><span>底线是大多数公司想把时间和金钱花在他们的业务上，而不是关注搜索引擎的基础设施。解决方案是我们首创的方法。这就叫</span> <a href="https://www.algolia.com/blog/ai/vectors-vs-hashes/"> <i> <span>神经哈希</span> </i> </a> <span>。哈希是一种允许我们在不丢失信息的情况下压缩矢量的技术。我们可以将复杂的2000位十进制长数字转换成简单的静态长度表达式，这使得计算它们变得非常快速和便宜。哈希在AI中应用于向量并不是一个新概念。</span></p>
<p class="translated">位置敏感散列(LSH)是一种众所周知的算法技术，它以很高的概率将相似的输入项散列到相同的“桶”中。典型地，在如何确定“桶”方面存在折衷——更高或更低的相似性。利用我们的神经散列技术，我们已经消除了权衡的需要。因此，我们可以用神经网络(因此得名神经哈希)将向量压缩或哈希到正常大小的1/10，同时仍然保留高达99%的信息。它们可以在标准硬件和数据库上存储和管理。事实上，我们可以处理散列向量或二进制向量，速度比标准向量相似度快500倍，使其与关键字搜索一样快。我们可以在普通的CPU上实现。</p>
<p class="translated"><span>这里有一个关于“非特富龙不粘油炸锅”的长尾查询的例子，它运行在一个只有关键字的引擎上，而不是散列/关键字引擎上。</span></p>
<p class="translated"><img loading="lazy" class="alignnone wp-image-18127 size-full" src="../Images/a118ca7232d9f03ec4cb4a3f0f3579ff.png" alt="" srcset="https://blog-api.algolia.com/wp-content/uploads/2023/02/keyword-only.jpg 1424w, https://blog-api.algolia.com/wp-content/uploads/2023/02/keyword-only-271x178.jpg 271w, https://blog-api.algolia.com/wp-content/uploads/2023/02/keyword-only-608x400.jpg 608w, https://blog-api.algolia.com/wp-content/uploads/2023/02/keyword-only-768x505.jpg 768w" sizes="(max-width: 1424px) 100vw, 1424px" data-original-src="https://blog-api.algolia.com/wp-content/uploads/2023/02/keyword-only.jpg"/> <img loading="lazy" class="alignnone wp-image-18128 size-full" src="../Images/301b12e31747a1552a34531cbed21e24.png" alt="" srcset="https://blog-api.algolia.com/wp-content/uploads/2023/02/neuralkeyword.jpg 1424w, https://blog-api.algolia.com/wp-content/uploads/2023/02/neuralkeyword-253x178.jpg 253w, https://blog-api.algolia.com/wp-content/uploads/2023/02/neuralkeyword-569x400.jpg 569w, https://blog-api.algolia.com/wp-content/uploads/2023/02/neuralkeyword-768x540.jpg 768w" sizes="(max-width: 1424px) 100vw, 1424px" data-original-src="https://blog-api.algolia.com/wp-content/uploads/2023/02/neuralkeyword.jpg"/></p>
<p class="translated"><span>从上面的截图中可以收集到一些重要的信息:</span></p>
<ul>
<li aria-level="1" class="translated"><span>混合动力引擎提供了更高的精度和更高的召回率。</span></li>
<li aria-level="1" class="translated"><span>我们在单个查询中同时运行散列和关键字，组合的混合结果按照相关性进行评分和排名。</span></li>
<li aria-level="1" class="translated"><span>这是在商用硬件上运行的，结果几乎是即时的；混合搜索结果并不比只搜索关键词慢。</span></li>
</ul>
<p class="translated"><span>还要注意,“frypan”是一个单词而不是两个单词——它也可以写成“煎锅”、“煎锅”或“煎锅”——但是搜索引擎不会跳过一个节拍。这涉及到人工智能检索的另一个重要特征:它大大减少了与提高搜索相关性相关的人工工作量。为常见术语编写同义词库或为特定类型的查询编写规则的时代已经一去不复返了。它也开启了全新的可能性，比如提供搜索服务。</span></p>
<p class="translated"><span>Algolia neural search</span><span>提供了这项新功能。它现在处于私下测试阶段，但您可以在这里注册</span><a href="https://www.algolia.com/lp/learn-algolia-neuralsearch/"><span/></a><span>以便在它可用时得到通知。</span></p>
<p class="translated">当然，搜索不仅仅是检索。在我们端到端的AI搜索金字塔中，检索(神经哈希)处于中间。人工智能金字塔的两端是查询理解和排序。在以后的博客中，我会谈到这另外两个功能。</p>
<h2 class="translated"><a id="next-steps" class="anchor" href="#next-steps" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a> <span>下一步</span></h2>
<p class="translated"><span>神经哈希代表了将人工智能检索投入生产的一个突破，用于各种各样的用例。结合人工智能支持的查询处理和重新排名，它有望释放人工智能现场搜索的全部力量。我们很高兴即将发布这些新的端到端人工智能功能！当全新的Algolia neural search</span><span>平台推出时，立即注册成为第一个试用者。</span></p>
</div></div>    
</body>
</html>