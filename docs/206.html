<html>
<head>
<title>A better date-picking experience with the DateRangePicker component | Algolia Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用DateRangePicker组件获得更好的日期选择体验</h1>
<blockquote>原文：<a href="https://www.algolia.com/blog/engineering/creating-a-better-date-picking-experience-with-the-daterangepicker-component/#0001-01-01">https://www.algolia.com/blog/engineering/creating-a-better-date-picking-experience-with-the-daterangepicker-component/#0001-01-01</a></blockquote><div><div class="css-t54cg4"><p class="translated">在设计搜索界面时，使用Algolia的即时搜索库就足够了。为了便于使用，每个库都有不同风格的JavaScript。每一个都有制作一个强大的UI所需的所有主要部分。</p>
<p class="translated">有时候你想超越现有的东西。</p>
<p class="translated">在这一点上，您有两个选择:用我们的连接器API制作您自己的或者找到一个预构建的定制小部件。</p>
<p class="translated">任何认识我的人都不会感到惊讶，当面对想要一个React日期选择器时，我希望尽可能少地编写代码来使它工作，但我也希望为圣诞老人提供最好的UI。当第五次奖金挑战来临时，我需要一些额外的东西。我的第一站？<a href="https://www.algolia.com/developers/code-exchange/">阿尔戈利亚电码交换</a>！</p>
<p class="translated">在对<code>date</code>组件进行快速搜索后，我找到了我所需要的:名副其实的<a href="https://github.com/algolia/react-instantsearch-widget-date-range-picker">@ algolia/react-instant search-widget-date-range-picker</a>！如果你没有使用React，还有一个<a href="https://github.com/algolia/instantsearch-widget-date-range-picker"> VanillaJS版本</a>。</p>
<h2 class="translated"><a id="setting-up-the-project" class="anchor" href="#setting-up-the-project" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a>设置项目</h2>
<p class="translated">如果您想继续，您需要安装一个新的React InstantSearch项目。最简单的方法是运行以下命令:</p>
<pre class="lang:sh decode:true "> npx create-instantsearch-app concert-search \
 --app-id latency \
 --api-key 059c79ddd276568e990286944276464a \
 --index-name concert_events_instantsearchjs \
 --template "React InstantSearch"</pre>
<p class="translated">这个怪物命令将建立一个React InstantSearch项目，并将其连接到<a href="https://github.com/algolia/datasets/tree/master/concerts"> Algolia的hosted concert索引</a>。将目录切换到创建的文件夹，运行<code>yarn start</code>作为坚实的起点。</p>
<p class="translated">至此，您已经获得了一组音乐会的完整搜索体验。</p>
<p class="translated">如果您想按日期过滤，您可以设置一个<code>&lt;RefinementList&gt;</code>组件，并将其<code>attribute</code>属性设置为<code>date</code>，但是这些日期是Unix时间戳(为了便于比较)。这对用户体验来说并不理想。让我们做得更好。</p>
<h2 class="translated"><a id="installing-and-configuring-the-widget" class="anchor" href="#installing-and-configuring-the-widget" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a>安装和配置小工具</h2>
<p class="translated">要启动并运行日期范围选择器，我们需要安装几个依赖项。</p>
<pre class="lang:sh decode:true ">npm install @algolia/react-instantsearch-widget-date-range-picker @duetds/date-picker
</pre>
<p class="translated">这将安装官方的Algolia React日期选择器小部件及其依赖项Duet日期选择器。</p>
<p class="translated">从这里，我们需要将包导入到我们的<code>src/App.js</code>文件中，并初始化Duet日期选择器以供使用。</p>
<p class="translated">//在create-instantsearch-app代码中包含的导入之后添加</p>
<pre class="lang:js decode:true ">import { DateRangePicker } from '@algolia/react-instantsearch-widget-date-range-picker';  
import { defineCustomElements } from "@duetds/date-picker/dist/loader";

// Defines the custom elements from the date picker for use on the window object  
defineCustomElements(window);</pre>
<p class="translated">既然这些包已经导入，我们就可以在页面上看到它们了。</p>
<h2 class="translated"><a id="adding-the-date-range-picker" class="anchor" href="#adding-the-date-range-picker" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a>添加日期范围选择器</h2>
<p class="translated">要将选择器添加到页面，我们需要在<code>&lt;InstantSearch&gt;</code>组件中选择一个点。该应用程序的基础是一个<code>search-panel</code>。默认情况下，这里只有结果，但是我们也可以添加一个过滤器面板。</p>
<pre class="lang:html decode:true ">&lt;InstantSearch searchClient={searchClient} indexName="concert_events_instantsearchjs"&gt;  
  &lt;div className="search-panel"&gt;
    &lt;div className="search-panel__filters"&gt; 
      &lt;DateRangePicker attribute="date" /&gt;
    &lt;/div&gt;

    &lt;div className="search-panel__results"&gt;

      //... Results code

    &lt;/div&gt;
  &lt;/div&gt;
&lt;/InstantSearch&gt;</pre>
<p class="translated">DateRangePicker接受一个<code>attribute</code>属性。该属性接受索引中点击次数的基于日期的属性。</p>
<p class="translated"><em>快速提示</em>:DateRangePicker接受一个Unix时间戳，从Epoch开始以毫秒为单位，而不是以秒为单位。根据您的数据结构，您可能需要在数据中创建一个辅助时间戳。</p>
<p class="translated">当您查看呈现的页面时，您现在应该有一个日期选择器。有一些小的UI障碍需要清理。</p>
<p class="translated">Duet日期选择器使用了大量CSS自定义属性来设计样式。在我们的<code>src/App.css</code>文件的开始，我们需要粘贴这些文件并为我们的应用程序进行配置(如果合适的话)。</p>
<pre class="lang:css decode:true ">:root {  
  --duet-color-primary: #3c4ee0;  
  --duet-color-text: #333;  
  --duet-color-text-active: #fff;  
  --duet-color-placeholder: #666;  
  --duet-color-button: #f5f5f5;  
  --duet-color-surface: #fff;  
  --duet-color-overlay: rgba(0, 0, 0, 0.8);  
  --duet-color-border: #d6d6e7;  

  --duet-font: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica,  
  Arial, sans-serif;  
  --duet-font-normal: 400;  
  --duet-font-bold: 600;  

  --duet-radius: 3px;  
  --duet-z-index: 600;  
}</pre>
<p class="translated">这两个选择器区域仍然靠得有点近，所以让我们也用一点CSS来解决这个问题。这可以放在<code>src/App.css</code>里，但应该更靠近底部。有许多方法可以获得两个项目之间的空间，快速简单的解决方案是使用CSS Grid和<code>gap</code>属性。</p>
<pre class="lang:css decode:true ">.date-range-picker {  
  display: grid;  
  gap: 1rem;  
}</pre>
<p class="translated">这样，我们就有了一个有效的、用户友好的日期选择器。不再需要处理Unix时间戳和转换。</p>
<h2 class="translated"><a id="take-this-further" class="anchor" href="#take-this-further" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a>借此进一步</h2>
<p class="translated">这在小样本数据集中非常有效，但也可以用于任何Algolia即时搜索应用程序。如果你想进一步了解这个例子，可以通过编辑<code>src/App.js</code>中的Hit组件来创建一个更好的UI。您还可以显示使用<a href="https://www.algolia.com/doc/api-reference/widgets/current-refinements/react/"> CurrentRefinements组件</a>应用的当前过滤器。</p>
</div></div>    
</body>
</html>